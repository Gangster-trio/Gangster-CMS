<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>问卷修改</legend>
</fieldset>

<div class="site-text site-block">
    <form id="updateQuestionForm" class="layui-form">
        <div class="layui-form-item">
            <label class="layui-form-label">标题</label>
            <div class="layui-input-inline">
                <input type="text" name="pageTitle" id="surveyTitle" required="" lay-verify="required"
                       placeholder="请输入标题" autocomplete="off"
                       class="layui-input">
            </div>
        </div>

        <div id="updateDate" class="layui-inline">
            <label class="layui-form-label">有效期</label>
            <div class="layui-input-inline">
                <input type="text" style="width: 100%" name="validDate" id="validDate" lay-verify="date"
                       placeholder="yyyy-MM-dd"
                       autocomplete="off"
                       class="layui-input">
            </div>
        </div>


    </form>
    <div style="background-color: rgba(117,166,255,0.21);margin-top: 20px; padding: 20px 0 10px 0">
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button id="addChoiceQ" onclick="addChoice()" class="layui-btn layui-btn-sm layui-btn-primary">
                    添加选择题
                </button>
                <button id="addQA" onclick="addQA()" class="layui-btn layui-btn-sm layui-btn-primary">添加问答</button>
            </div>
        </div>
    </div>

    <div style="margin-top: 20px" class="layui-form-item">
        <div class="layui-input-block">
            <button onclick="submitData()" class="layui-btn" lay-filter="submitForm">立即提交
            </button>
            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
    </div>
</div>
<style>
    .choice {
        background-color: rgba(117, 166, 255, 0.21);
        padding: 20px 0 20px 0;
        margin-top: 10px
    }
</style>
<script src="/module/survey/js/survey.js"></script>
<script>

    var form;
    layui.use(['laydate', 'form'], function () {
        var laydate = layui.laydate;

        form = layui.form;
        form.render();
        //执行一个laydate实例
        laydate.render({
            elem: '#validDate',
            type: 'datetime',
            range: '~',
            theme: '#393D49'
        });
    });


    $.ajax({
        type: 'get',
        url: '/survey/page/details/' + pageId,
        async: false,
        success: function (data) {
            var obj = data.data;
            $("#surveyTitle").val(obj.pageTitle);
            $("#validDate").val(obj.validDate);
            for (var i = 0; i < obj.questions.length; i++) {
                switch (i.topicType) {
                    case "单选":
                        
                        break;
                    case "多选":
                        break;
                    case "问答题":
                        break;
                    default:
                }
            }

        },
        error: function (resp) {
            layui.layer.alert("failed: " + resp);
        }
    });
</script>